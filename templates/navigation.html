<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container">
        <a class="navbar-brand" href="#" id="home-link">Speakerpool Dashboard</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" id="nav-overview" data-page="index.html">Overview</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="nav-speakers" data-page="speakers.html">Speakers</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="nav-search" data-page="search.html">Search</a>
                </li>
            </ul>
        </div>
    </div>
</nav>

<script>
// Fix navigation links to work in both local and GitHub Pages environments
document.addEventListener('DOMContentLoaded', function() {
    console.log('Navigation script running...');
    
    // Get all navigation links
    const navLinks = document.querySelectorAll('.navbar-nav .nav-link');
    const homeLink = document.getElementById('home-link');
    
    console.log('Found navigation links:', navLinks.length);
    
    /**
     * Get the correct path for the current environment
     */
    function getCorrectPath(pageName) {
        console.log('Getting path for page:', pageName);
        
        // Get the current hostname and path
        const hostname = window.location.hostname;
        const path = window.location.pathname;
        
        console.log('Current hostname:', hostname);
        console.log('Current path:', path);
        
        // Check if we're on GitHub Pages
        const isGitHubPages = hostname.includes('github.io');
        console.log('Is GitHub Pages:', isGitHubPages);
        
        // Check if we're in the pages directory
        const inPagesDir = path.includes('/pages/');
        console.log('In pages directory:', inPagesDir);
        
        // Simplest approach - direct links for local development
        if (inPagesDir) {
            // If we're already in the pages directory, just use the filename
            return pageName;
        } else if (isGitHubPages) {
            // For GitHub Pages, include the repository name
            const pathParts = path.split('/');
            // The repo name should be the first part of the path on GitHub Pages
            const repoName = pathParts.length > 1 ? pathParts[1] : '';
            
            if (repoName) {
                return `/${repoName}/pages/${pageName}`;
            } else {
                return `/pages/${pageName}`;
            }
        } else {
            // For local development when not in pages directory
            return `/pages/${pageName}`;
        }
    }
    
    // Update home link
    if (homeLink) {
        const homePath = window.location.hostname.includes('github.io') ? 
            window.location.pathname.split('/').slice(0, 2).join('/') + '/' : 
            '/';
        homeLink.href = homePath;
        console.log('Set home link to:', homePath);
    }
    
    // Update each navigation link
    navLinks.forEach((link, index) => {
        const pageName = link.getAttribute('data-page');
        if (pageName) {
            const newHref = getCorrectPath(pageName);
            link.href = newHref;
            console.log(`Set link ${index} (${pageName}) to:`, newHref);
            
            // Add click event listener for debugging
            link.addEventListener('click', function(e) {
                console.log(`Link clicked: ${pageName} -> ${newHref}`);
            });
        }
    });
});
</script>
